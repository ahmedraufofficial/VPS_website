{% extends "base.html" %}
{% block metacontent %}
{% if meta == "" %}
<meta name="title" content="Search for your ideal home">
<meta name="description" content="Search Results of all the properties close to your liking">
<meta name="keywords" content="buying, selling, renting, ammenities,units, communities, real estate, buy, rent, discover, details">
<meta property="og:image" content="https://www.uhpae.com/static/images/logo.png" /> 
<title>Search</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="English">
<meta property="og:url" content="https://www.uhpae.com/search">
<meta property="og:title" content="Search for your ideal home">
<meta property="og:description" content="buying, selling, renting, ammenities,units, communities, real estate, buy, rent, discover,details">
{% else %}
<meta name="title" content="{{meta[0]}}">
<meta name="description" content="{{meta[1]}}">
<meta name="keywords" content="{{meta[2][0]}} , {{meta[2][1]}} , {{meta[2][2]}} , property in abu dhabi">
<meta property="og:image" content="https://www.uhpae.com/static/images/logo.png" /> 
<title>{{meta[0]}}</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="English">
<meta property="og:url" content={{url}}>
<meta property="og:title" content="{{meta[0]}}">
<meta property="og:description" content="{{meta[1]}}">
{% endif %}
{% endblock %}
{% block content %}





  <section style="background-image: url(/static/images/scaledbg.jpg); background-repeat: no-repeat;background-attachment: fixed;background-size: cover; height: 100%;">
    <div style="height: 100%;width: 100%;background-color: rgba(0, 0, 0, 0.75);">
  

<div class="search_transparent_bg" style=" margin-top: 0px;position: relative; padding-bottom: 4px;">
  <div class="container">

      <form id="my-form-id" class="form-inline" style="padding-top: 80px;position: relative;">
      <div class="row justify-content-between">
          <div class="col-lg-3 col-md-3 col-sm-12 text-center">
          <select style="width: 100%;" id="units" name="units" class="custom-select s_bar_btn_drop"  style="text-align: center; margin-left: 0;">
            <option value="" disabled selected>Buy / Sell</option>
            <option value="buy">Buy</option>
            <option value="rent">Rent</option>
          </select>
          </div>
<div class="col-lg-3 col-md-3 col-sm-12 text-center">
          <select id="contract" name="contract" class="custom-select s_bar_btn_drop" style="width: 100%;">
            <option value="" disabled selected>Status</option>
            <option value="residential">Residential</option>
            <option value="commercial">Commercial</option>
            </select>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-12 text-center">
            <select style="width: 100%;" id="city" name="city" class="custom-select s_bar_btn_drop">
              <option value="" disabled selected>Emirate</option>
              <option value="Abu Dhabi">Abu Dhabi</option>
              <option value="Dubai">Dubai</option>
              <option value="Alain">Al ain</option>
              </select>
    
</div>
<div class="col-lg-3 col-md-3 col-sm-12 text-center">
          <select style="width: 100%;" id="area" name="area" class="custom-select s_bar_btn_drop" >
            <option value="" disabled selected>Location</option>
            <option value="Al Reem Island">Reem Island</option>
            <option value="Yas Island">Yas Island</option>
            <option value="Al Raha Beach">Al Raha</option>
            <option value="Saadiyat Island">Al Saadiyat</option>
            <option value="Al Reef">Al Reef</option>
            <option value="Khalifa City A">Khalifa City</option>
            </select>
        </div>
      </div>
        <div class="row justify-content-center" >
         
          <div class="col-lg-3 col-md-3 col-sm-12 text-center">
            
          <select style="width: 100%;" id="price" name="price" class="custom-select s_bar_btn_drop">
            <option value="" disabled selected>Max Price</option>
            <option value="0">50,000</option>
            <option value="1">100,000</option>
            <option value="2">200,000</option>
            <option value="3">300,000</option>
            <option value="4">400,000</option>
            <option value="5">+400,000</option>
          </select>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-12 text-center">
    <select style="width: 100%;" id="beds" name="beds" class="custom-select s_bar_btn_drop" >
      <option value="" disabled selected>Beds</option>
      <option value="ST">Studio</option>
      <option value="1">One</option>
      <option value="2">Two</option>
      <option value="3">Three</option>
      <option value="4">Four</option>
      <option value="5">Five</option>
      <option value="6">Six</option>
      </select>
    
    </div>
    <div class="col-lg-3 col-md-3 col-sm-12 text-center">
        <select style="width: 100%;" id="type" name="propertytype" class="custom-select s_bar_btn_drop" >
        <option value="" disabled selected>Type</option>
        <option value="Apartment">Apartment</option>
        <option value="Villa">Villa</option>
        <option value="Compound">Compound</option>
        <option value="Townhouse">Townhouse</option>
        <option value="Land Residential">Land Residential</option>
        <option value="Penthouse">Penthouse</option>
        <option value="Office">Office</option>
        </select>
    </div> 
    <div class="col-lg-3 col-md-3 col-sm-12 text-center"> 
      <button style="width: 100%; background-color: #001524;color: white;" type="button" class="s_bar_btn_drop" onclick="myFunction('1')" formmethod="get|post">Search</button>
        </div>
    
    

        
        </div>
    
        
        </form>
    
    
 
  
    </div>
    </div>
  

<div class="container">
  <div class="row">
    <div class="col" style="text-align: center; margin-top: 2%; margin-bottom: 2%;">
      <h2 class="nfont" style="letter-spacing: 3px; font-family: 'Poppins-bold'; text-transform: uppercase;">{{search}}</h2>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col">
      <p class="simple" style="color: #8e8a8a;font-family: 'Poppins-light', sans-serif;">Searched for: {{args}}</p>
    </div>
  </div>
</div>
<div style="height: 100%;width: 100%;background-color: rgba(0, 0, 0, 0.75);padding-top:15px;padding-bottom: 15px;margin-top: 20px;">
<div class="container">

  <div id="window_footer"></div>

  <div class="row justify-content-center" id="display">
   
    
  </div>



</div>
<div class="container">
  <div class="row justify-content-center" style="margin-top: 20px;">
    
      <input id="current_page" type="hidden" value="1">
        <ul class="pagination">
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px; background-color: #4b4b4b; font-size: 9pt;border-color: #4b4b4b;"  class="btn btn-info" onclick="prev()" class="page-link" >Prev</button></li>
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px;  font-size: 9pt;border-color: white;" onclick="myFunction('1')" >1</button></li>
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px;  font-size: 9pt;border-color: white;" onclick="myFunction('2')" >2</button></li>
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px;  font-size: 9pt;border-color: white;" onclick="myFunction('3')" >3</button></li>
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px;  font-size: 9pt;border-color: white;" onclick="myFunction('4')" >4</button></li>
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px;  font-size: 9pt;border-color: white;" onclick="myFunction('5')" >5</button></li>
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px;  font-size: 9pt;border-color: white;" onclick="myFunction('6')" >6</button></li>
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px;  font-size: 9pt;border-color: white;" onclick="myFunction('7')" >7</button></li>
          <li class="page-item"><button class = "pagenumber  btn btn-info" style="border-radius:0px; background-color: #4b4b4b; font-size: 9pt;border-color: #4b4b4b;"  class="btn btn-info" onclick="next()" class="page-link" >Next</button></li>
        </ul>
      
   
  </div>

</div>
</div>
</div>
</section>



{% endblock %}
{% block scripts %}

{% for item in pl %}
<script>
document.getElementById('{{item[0]}}').value='{{item[1]}}' 
</script>
{% endfor %}


<script>

    var b = JSON.parse('{{ queryRes | tojson | safe}}');
    var data ='';
    var data_list = '';
    var script_properties = '';
    var cardid = 1;
    var pagebtn = ''
    console.log(b)
    $.each(b, function(key, value){
      var area = value.area;
      var newarea = area.replace(/\s/g, '-')
      var property = value.property;
      if (value.property == "")
      {value.property = "no name"} 
      var newproperty = property.replace(/\s/g, '-')
                   if (value.tag == "hot")
                  { var f = "display:block;"}
                  else 
                  {var f = "display:none;"}
                  if (value.units == "rent"){
                      var units = "Rent";
                      var cosmo = "Discover";
                      var x = "background-color: #0e4a88 !important;";
                      var y =  "color: #000; font-family: 'Poppins-light';font-size: 9pt;display: inline;";
                      var color = "gold-"; 
                    }
                  else if (value.units == "buy"){
                      var units = "Buy";
                      var cosmo = "Details"
                      var x = "background-color: #A57D2D !important;";
                      var y = "color: #000; font-family: 'Poppins-light';font-size: 9pt;display: inline;";
                      var color = "";
                      }

                      if (value.beds == "ST"){
                    beds = ''}
                  else {
                    beds = ' Bed'
                  }
                  data += '<div class="col-lg-3 col-md-3 col-sm-12 d-flex justify-content-center" style="margin-bottom: 15px;margin-top:15px;">'
                  data += '<div class="card" style="width: 18rem; height: 15.5rem;  position:relative; border-radius:0px; border:none;">'
                  data += '<img class="card-img-top1" src="'+value.image+'"  onerror="imgError(this);" style="height: 160px; object-fit:cover;">'
                  data += '<div class="card-img-overlay" style="z-index:0;"><a href="/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'"><div class="card-content"><button class="viewmore">'+value.title+'</button></div></a></div>'
                  data += '<div class="card-body" style="z-index:2; border-radius: 0px;"><a href="/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'">'
                  data += '<div class="row" style="margin-top: -10px;margin-bottom:5px;"><div class="col"><h5 class="card-title" style =  "'+ y +'font-size: 11pt;text-transform: uppercase;  overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;">'+value.property+'</h5></div></div>'
                  data += '<div class="row" ><div class="col"><h5 class="card-title" style =  "'+ y +' font-size: 7.5pt;overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;">'+value.type+', '+value.area+'</h5></div><div class="col-3"><p class="card-text" style ="float:right;'+ y +'font-size: 7.5pt;">'+value.beds+beds+'</p></div></div>'
                  data += '<div class="row" style="margin-top:-7px;"><div class="col"><p class="card-text" style ="'+ y +'font-size: 7.5pt;">Abu Dhabi</p></div><div class="col-5"><p style ="'+ y +'font-size: 7.5pt;float:right; margin-top:7px;" >AED '+value.price+'</p></div></div>'
                  data += '</a></div>'
                  data += '</div>'
                  data += '</div>'
                  
                  cardid = cardid + 1
                
                
                  script_properties +='{"@context" : "https://schema.org","@type" : "Product","name" : "'+value.property+'","image" : "'+value.image+'","description" : "'+value.title+'","url" : "https://uhpae.com/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'","offers" : {"@type" : "Offer","price" : "'+value.price+'","availability" : "InStock","priceCurrency" : "Dirhams","url" : "https://uhpae.com/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'"},"brand" : {"@type":"Brand","name" : "Unique Home Properties"},"address":{"@type":"PostalAddress","addressRegion":"Abu Dhabi","addressLocality":"'+value.area+'","areaServed":"'+value.size+'"},"category" : "'+value.type+'"},'


                })


    $('#display').append(data);
    


        function Scrolldown() {
     window.scroll(0,100); 
}

window.onload = Scrolldown;
var script = $('<script type="application/ld+json">[ {"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","name":"For '+window.location.href+'","item":" '+window.location.href+'","position":1}],"numberOfItems":1},'+script_properties.slice(0,-1)+']</' + 'script>').appendTo(document.head);


</script>

<script>
  function prev(){
    cp = $("#current_page").val();
    cp = parseInt(cp) - 1;
    if (cp != 0){
      myFunction(cp)
    }
  }
  function next(){
    cp = $("#current_page").val();
    cp = parseInt(cp) + 1;
    myFunction(cp)
  }
  
  function myFunction(x){
      $("#current_page").val(x)
      units = $("#units").val();
      propertytype = $("#type").val();
      pricefrom = $("#price").val();
      textinlivebox = $("#city").val();
      textinlocation = $("#area").val();
      select = $("#beds").val();
      contract = $("#contract").val();
      page = x
          $.ajax({
              method:"post",
              url:"/livesearch",
              data:{units:units,text:textinlivebox, location:textinlocation, 
              selectbox:select, contract:contract,
              pricefrom:pricefrom,  page:page,
              propertytype:propertytype},
              success:function(res){
                $('#display').empty();
                  var data ='';
                  $.each(res.queryres, function(key, value){
                    var area = value.area;
                    var newarea = area.replace(/\s/g, '-')
                    var property = value.property;
                    var newproperty = property.replace(/\s/g, '-')
                    if (value.units == "rent"){
                      var units = "Rent";
                      var cosmo = "Discover";
                      var x = "background-color: #0e4a88 !important;";
                      var y =  "color: #000; font-family: 'Poppins-light';font-size: 9pt;display: inline;";
                      var color = "gold-"; 
                    }
                  else if (value.units == "buy"){
                      var units = "Buy";
                      var cosmo = "Details"
                      var x = "background-color: #A57D2D !important;";
                      var y = "color: #000; font-family: 'Poppins-light';font-size: 9pt;display: inline;";
                      var color = "";
                      }

                      if (value.beds == "ST"){
                    beds = ''}
                  else {
                    beds = ' Bed'
                  }
                  data += '<div class="col-lg-3 col-md-3 col-sm-12 d-flex justify-content-center" style="margin-bottom: 15px;margin-top:15px;">'
                  data += '<div class="card" style="width: 18rem; height: 15.5rem;  position:relative; border-radius:0px; border:none;">'
                  data += '<img class="card-img-top1" src="'+value.image+'"  onerror="imgError(this);" style="height: 160px; object-fit:cover;">'
                  data += '<div class="card-img-overlay" style="z-index:0;"><a href="/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'"><div class="card-content"><button class="viewmore">'+value.title+'</button></div></a></div>'
                  data += '<div class="card-body" style="z-index:2; border-radius: 0px;"><a href="/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'">'
                  data += '<div class="row" style="margin-top: -10px;margin-bottom:5px;"><div class="col"><h5 class="card-title" style =  "'+ y +'font-size: 11pt;text-transform: uppercase;  overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;">'+value.property+'</h5></div></div>'
                  data += '<div class="row" ><div class="col"><h5 class="card-title" style =  "'+ y +' font-size: 7.5pt;overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;">'+value.type+', '+value.area+'</h5></div><div class="col-3"><p class="card-text" style ="float:right;'+ y +'font-size: 7.5pt;">'+value.beds+beds+'</p></div></div>'
                  data += '<div class="row" style="margin-top:-7px;"><div class="col"><p class="card-text" style ="'+ y +'font-size: 7.5pt;">Abu Dhabi</p></div><div class="col-5"><p style ="'+ y +'font-size: 7.5pt;float:right; margin-top:7px;" >AED '+value.price+'</p></div></div>'
                  data += '</a></div>'
                  data += '</div>'
                  data += '</div>'
   
              })
                 
                  $('#display').append(data);
           
              }
          })
  }

 
</script>


{% endblock %}