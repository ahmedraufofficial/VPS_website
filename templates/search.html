{% extends "base.html" %}
{% block metacontent %}
{% if meta == "" %}
<meta name="title" content="Search for your ideal home">
<meta name="description" content="Search Results of all the properties close to your liking">
<meta name="keywords" content="buying, selling, renting, ammenities,units, communities, real estate, buy, rent, discover, details">
<meta property="og:image" content="https://www.uhpae.com/static/images/logo.png" /> 
<title>Search</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="English">
<meta property="og:url" content="https://www.uhpae.com/search">
<meta property="og:title" content="Search for your ideal home">
<meta property="og:description" content="buying, selling, renting, ammenities,units, communities, real estate, buy, rent, discover,details">
{% else %}
<meta name="title" content="{{meta[0]}}">
<meta name="description" content="{{meta[1]}}">
<meta name="keywords" content="{{meta[2][0]}} , {{meta[2][1]}} , {{meta[2][2]}} , property in abu dhabi">
<meta property="og:image" content="https://www.uhpae.com/static/images/logo.png" /> 
<title>{{meta[0]}}</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="English">
<meta property="og:url" content={{url}}>
<meta property="og:title" content="{{meta[0]}}">
<meta property="og:description" content="{{meta[1]}}">
{% endif %}

{% endblock %}
{% block content %}


<div class="container" style="position: relative;">
  <div class="row" style="justify-content: center;">
  <div class="col-8 search_transparent_bg">
    <div class="row justify-content-center">
        
      <div class="dropdown">
    
        <form id="my-form-id" class="form-inline" method="POST">
        <div class="col">
          <div class="row">
  
          <div class="col text-center"> <h4 style="color: white; font-family: 'Poppins'; ">UNIQUE HOMES WORLDWIDE PROPERTIES</h4></div>
       
          </div>
        <div class="row justify-content-center">
        <select id="byorsell" name="units" class="s_bar_btn" style="appearance: none; background: url(../static/icons/down_row.png) 90% / 10% no-repeat white;">
          <option value="buy">Buy</option>
          <option value="rent">Rent</option>
        </select>
        
        
        <input id="keywordaddss" class="s_bar_btn" type="text" id="commentary" name="keyword" placeholder="Location / Community / Ref No" >
        
        <button class="s_bar_btn" type="button" onclick="myFunction()">Search</button>
  
      </div>
      <div class="row justify-content-center">
   <div class="col text-center">
          <img src="../static/icons/down-arrow.svg" class="dropdownbtn" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" onclick="showdiv()" alt="" style="">
     
        
        <div class="dropdown-menu dropsearchpos" aria-labelledby="dropdownMenu2">
        <div class="container">
         <div class="row justify-content-center">
  
            
        <select id="contract" name="contract" class="custom-select s_bar_btn">
          <option value="" disabled selected>Status</option>
          <option value="residential">Residential</option>
          <option value="commercial">Commercial</option>
          </select>
     
          
            <select id="city" name="city" class="custom-select s_bar_btn">
              <option value="" disabled selected>Emirate</option>
              <option value="Abu Dhabi">Abu Dhabi</option>
              <option value="Dubai">Dubai</option>
              <option value="Alain">Al ain</option>
              </select>
  
        <input type="number" id="pricefrom" name="pricefrom" placeholder="Price" class="s_bar_btn">   
        
      
      </div>
    <div class="row justify-content-center">
  
  <select id="bedrooms"  name="beds" class="custom-select s_bar_btn" >
    <option value="" disabled selected>Beds</option>
    <option value="ST">Studio</option>
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
    <option value="4">Four</option>
    <option value="5">Five</option>
    <option value="6">Six</option>
    </select>
  
  
      <select id="propertytype"  name="propertytype" class="custom-select s_bar_btn" >
      <option value="" disabled selected>Type</option>
      <option value="Apartment">Apartment</option>
      <option value="Villa">Villa</option>
      <option value="Compound">Compound</option>
      <option value="Townhouse">Townhouse</option>
      <option value="Land Residential">Land Residential</option>
      <option value="Office">Office</option>
      </select>
   
    
    <select id="location" name="area" class="custom-select s_bar_btn" >
      <option value="" disabled selected>Location</option>
      <option value="Al Reem Island">Reem Island</option>
      <option value="Yas Island">Yas Island</option>
      <option value="Al Raha Beach">Al Raha</option>
      <option value="Saadiyat Island">Al Saadiyat</option>
      <option value="Al Reef">Al Reef</option>
      <option value="Khalifa City A">Khalifa City</option>
      </select>
    </div>
  
  </div>
  
        </div>
        </div>
      </div>
      
      </div>
  
      
      </form>
  
  
    
  </div>
  </div>
  </div>
  </div>
  </div>
  


<section style="background-color: #001524; background-repeat: no-repeat;background-attachment: fixed;background-size: cover; height: 100%; padding-top:200px; ">


<div class="container">
  <div class="row">
    <div class="col" style="text-align: center; margin-top: 10%; margin-bottom: 2%;">
      <h2 id="window_footer" class="nfont" style="letter-spacing: 3px; font-family: 'Poppins-bold'; text-transform: uppercase;">{{search}}</h2>
    </div>
  </div>
 

  <div class="row justify-content-center" id="display">
   
    
  </div>

</div>

</section>




{% endblock %}
{% block scripts %}



<script>
    var b = JSON.parse('{{ queryRes | tojson | safe}}');
    var data ='';
    var data_list = '';
    var script_properties = '';
    var cardid = 1;
    var pagebtn = ''
    console.log(b)
    $.each(b, function(key, value){
      var area = value.area;
      var newarea = area.replace(/\s/g, '-')
      var property = value.property;
      if (value.property == "")
      {value.property = "no name"} 
      var newproperty = property.replace(/\s/g, '-')
                   if (value.tag == "hot")
                  { var f = "display:block;"}
                  else 
                  {var f = "display:none;"}
                  if (value.units == "rent"){
                      var units = "Rent";
                      var cosmo = "Discover";
                      var x = "background-color: #0e4a88 !important;";
                      var y =  "color: #000; font-family: 'Poppins-light';font-size: 9pt;display: inline;";
                      var color = "gold-"; 
                    }
                  else if (value.units == "buy"){
                      var units = "Buy";
                      var cosmo = "Details"
                      var x = "background-color: #A57D2D !important;";
                      var y = "color: #000; font-family: 'Poppins-light';font-size: 9pt;display: inline;";
                      var color = "";
                      }
                  
                  data += '<div class="col-lg-3 col-md-3 col-sm-12 d-flex justify-content-center" style="margin-bottom: 10px;">'
                  data += '<div class="card" style="width: 17rem;  position:relative; border-radius:0px; border:none;">'
                  data += '<img class="card-img-top1" src="'+value.image+'" alt="" style="height: 180px; object-fit:cover;">'
                  data += '<div class="card-img-overlay" style="z-index:0;"><div class="card-content"><a href="/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'"><button class="viewmore">'+value.title+'</button></a></div></div>'
                  data += '<div class="card-body" style="z-index:2; border-radius: 0px;">'
                  data += '<div class="row"><div class="col"><h5 class="card-title" style =  "'+ y +'font-size: 9pt;">'+value.property+'</h5><p style ="float:right;'+ y +'font-size: 9pt; margin-top:4px;" >AED '+value.price+'</p></div></div>'
                  data += '<div class="row"><div class="col"><h5 class="card-title" style =  "'+ y +'">'+value.type+', '+value.area+'</h5><p class="card-text" style ="margin-top:4px;float:right;'+ y +'">'+value.beds+' Bed</p></div></div>'
                  data += '</div>'
                  data += '</div>'
                  data += '</div>'
                  
                  cardid = cardid + 1
                
                
                  script_properties +='{"@context" : "https://schema.org","@type" : "Product","name" : "'+value.property+'","image" : "'+value.image+'","description" : "'+value.title+'","url" : "https://uhpae.com/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'","offers" : {"@type" : "Offer","price" : "'+value.price+'","availability" : "InStock","priceCurrency" : "Dirhams","url" : "https://uhpae.com/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'"},"brand" : {"@type":"Brand","name" : "Unique Home Properties"},"address":{"@type":"PostalAddress","addressRegion":"Abu Dhabi","addressLocality":"'+value.area+'","areaServed":"'+value.size+'"},"category" : "'+value.type+'"},'


                })
    
                
     
    

    $('#display').append(data);

    
        function Scrolldown() {
     window.scroll(0,100); 
}

window.onload = Scrolldown;
var script = $('<script type="application/ld+json">[ {"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","name":"For '+window.location.href+'","item":" '+window.location.href+'","position":1}],"numberOfItems":1},'+script_properties.slice(0,-1)+']</' + 'script>').appendTo(document.head);
  var element = document.getElementById("header");
  element.classList.remove("bg-dark");
  element.classList.add("bg-dark-const");



</script>

<script>
    
    
  function myFunction(){
      byorsell = $("#byorsell").val();
      propertytype = $("#propertytype").val();
      keyword1 = $("#keywordaddss").val();
      pricefrom = $("#pricefrom").val();
      textinlivebox = $("#city").val();
      textinlocation = $("#location").val();
      select = $("#bedrooms").val();
      contract = $("#contract").val();

          $.ajax({
              method:"post",
              url:"/livesearch",
              data:{byorsell:byorsell,text:textinlivebox, location:textinlocation, 
              selectbox:select, contract:contract,
              pricefrom:pricefrom,  keyword:keyword1,
              propertytype:propertytype},
              success:function(res){
                $('#display').empty();
                  var data ='';
                  $.each(res.queryres, function(key, value){
                    var area = value.area;
                    var newarea = area.replace(/\s/g, '-')
                    var property = value.property;
                    var newproperty = property.replace(/\s/g, '-')
                    if (value.units == "rent"){
                      var units = "Rent";
                      var cosmo = "Discover";
                      var x = "background-color: #0e4a88 !important;";
                      var y =  "color: #000; font-family: 'Poppins-light';font-size: 9pt;display: inline;";
                      var color = "gold-"; 
                    }
                  else if (value.units == "buy"){
                      var units = "Buy";
                      var cosmo = "Details"
                      var x = "background-color: #A57D2D !important;";
                      var y = "color: #000; font-family: 'Poppins-light';font-size: 9pt;display: inline;";
                      var color = "";
                      }
                  
                  data += '<div class="col-lg-3 col-md-3 col-sm-12 d-flex justify-content-center" style="margin-bottom: 10px;">'
                  data += '<div class="card" style="width: 17rem;  position:relative; border-radius:0px; border:none;">'
                  data += '<img class="card-img-top1" src="'+value.image+'" alt="" style="height: 180px; object-fit:cover;">'
                  data += '<div class="card-img-overlay" style="z-index:0;"><div class="card-content"><a href="/communities/'+newarea+'/'+newproperty+'/'+value.ref_no+'"><button class="viewmore">'+value.title+'</button></a></div></div>'
                  data += '<div class="card-body" style="z-index:2; border-radius: 0px;">'
                  data += '<div class="row"><div class="col"><h5 class="card-title" style =  "'+ y +'font-size: 9pt;">'+value.property+'</h5><p style ="float:right;'+ y +'font-size: 9pt; margin-top:4px;" >AED '+value.price+'</p></div></div>'
                  data += '<div class="row"><div class="col"><h5 class="card-title" style =  "'+ y +'">'+value.type+', '+value.area+'</h5><p class="card-text" style ="margin-top:4px;float:right;'+ y +'">'+value.beds+' Bed</p></div></div>'
                  data += '</div>'
                  data += '</div>'
                  data += '</div>'
   
              })
                 
                  $('#display').append(data);

              }
          })
  }

 
</script>


{% endblock %}